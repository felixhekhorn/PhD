following \cite{PhysRevD.40.54,van_neerven_dimensional_1986,Marco}:

process:
\begin{equation} \Pggx(q) + \Pq(k_1) \rightarrow \PQ(p_1)+\PaQ(p_2) + \Pq(k_2) \end{equation}
\begin{equation} \Pggx(q) + \Pg(k_1) \rightarrow \PQ(p_1)+\PaQ(p_2) + \Pg(k_2) \end{equation}

\subsection{kinematic constraints}

definitions of kinematic variables:
\begin{align}
s &= (q+k_1)^2 &\Rightarrow& &2qk_1 &= s-q^2 = s'\\
s_3 &= (k_2+p_2)^2-m^2  &\Rightarrow& &2k_2p_2 &= s_3\\
s_4 &= (k_2+p_1)^2-m^2  &\Rightarrow& &2k_2p_1 &= s_4\\
s_5 &= (p_1+p_2)^2 = -u_5  &\Rightarrow& &2p_1p_2 &= s_5-2m^2\\
t_1 &= (k_1-p_2)^2-m^2 = t - m^2  &\Rightarrow& &2k_1p_2 &=-t_1\\
t' &= (k_1-k_2)^2  &\Rightarrow& &2k_1k_2 &= -t'\\
u_1 &= (q-p_2)^2-m^2 = u - m^2  &\Rightarrow& &2qp_2 &=-u_1+q^2\\
u_6 &= (k_1-p_1)^2 - m^2  &\Rightarrow& &2k_1p_1 &=-u_6\\
u_7 &= (q-p_1)^2 - m^2  &\Rightarrow& &2qp_1 &=-u_7+q^2\\
u' &= (q-k_2)^2  &\Rightarrow& &2qk_2 &=-u'+q^2
\end{align}

impose momentum conservation:
\begin{equation}
q+k_1 = p_1+p_2+k_2
\end{equation}

contract with 2 times momentum:
\begin{align}
2q^2 && +s' &=-u_7+q^2 &-& u_1+q^2 &-& u'+q^2 &&\Leftrightarrow &0 &=s'+u_1+u_7+u'-q^2 \label{eq:MomCon3wq} \\
s-q^2 && +0 &= -u_6 &-& t_1 &-& t' &&\Leftrightarrow &0 &= s'+t_1+t'+u_6 \label{eq:MomCon3wk1}\\
-u_7+q^2 && -u_6 &= 2m^2 &+& s_5-2m^2 &+& s_4 &&\Leftrightarrow &0 &= s_4+s_5+u_6+u_7-q^2 \label{eq:MomCon3wp1}\\
-u_1+q^2 && -t_1 &= s_5-2m^2 &+& 2m^2 &+& s_3 &&\Leftrightarrow &0 &= s_3+s_5+t_1+u_1-q^2 \label{eq:MomCon3wp2}\\
-u'+q^2 && -t' &= s_4 &+& s_3 &+& 0 &&\Leftrightarrow &0 &= s_3+s_4+t'+u'-q^2 \label{eq:MomCon3wk2}
\end{align}

\begin{align}
\frac 1 2 \left((\ref{eq:MomCon3wq}) + (\ref{eq:MomCon3wk1}) + (\ref{eq:MomCon3wp2}) - (\ref{eq:MomCon3wp1}) - (\ref{eq:MomCon3wk2})\right)=&\,0= s' + t_1 + u_1 - s_4\\
\frac 1 2 \left((\ref{eq:MomCon3wq}) + (\ref{eq:MomCon3wk1}) + (\ref{eq:MomCon3wk2}) - (\ref{eq:MomCon3wp1}) - (\ref{eq:MomCon3wp2})\right)=&\,0= s' + t' + u' - s_5 \label{eq:MonCon3s5up}\\
\frac 1 2 \left((\ref{eq:MomCon3wp2}) + (\ref{eq:MomCon3wk2}) - (\ref{eq:MomCon3wq}) - (\ref{eq:MomCon3wk1}) - (\ref{eq:MomCon3wp1})\right)=&\,0= s_3-s'-u_6-u_7\\
\frac 1 2 \left((\ref{eq:MomCon3wp1}) + (\ref{eq:MomCon3wp2}) + (\ref{eq:MomCon3wk2}) - (\ref{eq:MomCon3wq}) - (\ref{eq:MomCon3wk1})\right)=&\,0= s_3+s_4+s_5-s\\
\frac 1 2 \left((\ref{eq:MomCon3wq}) + (\ref{eq:MomCon3wp1}) - (\ref{eq:MomCon3wk1}) - (\ref{eq:MomCon3wp2}) - (\ref{eq:MomCon3wk2})\right)=&\,0=-s_3-t_1-t'+u_7\\
\frac 1 2 \left((\ref{eq:MomCon3wk1}) + (\ref{eq:MomCon3wp1}) + (\ref{eq:MomCon3wk2}) - (\ref{eq:MomCon3wq}) - (\ref{eq:MomCon3wp2})\right)=&\,0=s_4+t'-u_1+u_6
\end{align}

\subsection{choose framework}
\input{Phasespace.2to3.Framework}

\subsection{phase space integrals}
\input{Phasespace.2to3.Int}

\subsection{needed set in matrix element}
\input{Phasespace.2to3.ME}
